var t,e,s,i,a,h,n,r,o,l,c,d,u,p,f,g,m,v,w,D,T,b,x,P,E,y,A,F,I,k,O,C,S,M,R,W,N,L,B,U,V,G,H,_,z,$,j,K=Object.defineProperty,Z=t=>{throw TypeError(t)},q=(t,e,s)=>((t,e,s)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s)(t,"symbol"!=typeof e?e+"":e,s),J=(t,e,s)=>e.has(t)||Z("Cannot "+s),Y=(t,e,s)=>(J(t,e,"read from private field"),s?s.call(t):e.get(t)),Q=(t,e,s)=>e.has(t)?Z("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),X=(t,e,s,i)=>(J(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),tt=(t,e,s)=>(J(t,e,"access private method"),s);import{p as et}from"./phaser-C2RWnc_5.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const st="TITLE",it="GAME",at="TITLE",ht="CLICK_TO_START",nt="CARDS",rt="TABLE",ot="BANNER",lt="PLAY_AGAIN",ct=111,dt={HEART:"HEART",DIAMOND:"DIAMOND",SPADE:"SPADE",CLUB:"CLUB"},ut="BLACK",pt={[dt.CLUB]:ut,[dt.SPADE]:ut,[dt.DIAMOND]:"RED",[dt.HEART]:"RED"};class ft{constructor(i,a,h=!1){Q(this,t),Q(this,e),Q(this,s),X(this,t,i),X(this,e,a),X(this,s,h)}get suit(){return Y(this,t)}get value(){return Y(this,e)}get isFaceUp(){return Y(this,s)}get color(){return pt[Y(this,t)]}flip(){X(this,s,!Y(this,s))}}function gt(t){throw new Error(`Error! Reached forbidden guard function with unexpected value: ${JSON.stringify(t)}`)}t=new WeakMap,e=new WeakMap,s=new WeakMap;class mt{constructor(){Q(this,n),Q(this,i),Q(this,a),Q(this,h),X(this,i,[]),X(this,a,[]),X(this,h,[]),tt(this,n,r).call(this),this.reset()}get cards(){return Y(this,i)}get drawPile(){return Y(this,a)}get discardPile(){return Y(this,h)}draw(){return Y(this,a).shift()}shuffle(){!function(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*e),i=t[e];t[e]=t[s],t[s]=i}}(Y(this,a))}shuffleInDiscardPile(){Y(this,h).forEach((t=>{t.flip(),Y(this,a).push(t)})),X(this,h,[])}reset(){X(this,h,[]),X(this,a,[...Y(this,i)]),this.shuffle()}}i=new WeakMap,a=new WeakMap,h=new WeakMap,n=new WeakSet,r=function(){Object.values(dt).forEach((t=>{for(let e=1;e<14;e+=1)Y(this,i).push(new ft(t,e))}))};class vt{constructor(t){Q(this,o),Q(this,l),X(this,o,t),X(this,l,0)}get suit(){return Y(this,o)}get value(){return Y(this,l)}addCard(){13!==Y(this,l)&&X(this,l,Y(this,l)+1)}reset(){X(this,l,0)}}o=new WeakMap,l=new WeakMap;class wt{constructor(){Q(this,m),Q(this,c),Q(this,d),Q(this,u),Q(this,p),Q(this,f),Q(this,g),X(this,c,new mt),X(this,u,new vt(dt.CLUB)),X(this,d,new vt(dt.SPADE)),X(this,p,new vt(dt.HEART)),X(this,f,new vt(dt.DIAMOND)),X(this,g,[[],[],[],[],[],[],[]])}get drawPile(){return Y(this,c).drawPile}get discardPile(){return Y(this,c).discardPile}get tableauPiles(){return Y(this,g)}get foundationPiles(){return[Y(this,d),Y(this,u),Y(this,p),Y(this,f)]}get wonGame(){return 13===Y(this,u).value&&13===Y(this,f).value&&13===Y(this,p).value&&13===Y(this,d).value}newGame(){Y(this,c).reset(),X(this,g,[[],[],[],[],[],[],[]]),Y(this,u).reset(),Y(this,f).reset(),Y(this,p).reset(),Y(this,d).reset();for(let t=0;t<7;t+=1)for(let e=t;e<7;e+=1){const s=Y(this,c).draw();e===t&&s.flip(),Y(this,g)[e].push(s)}}drawCard(){const t=Y(this,c).draw();return void 0!==t&&(t.flip(),Y(this,c).discardPile.push(t),!0)}shuffleDiscardPile(){return 0===Y(this,c).drawPile.length&&(Y(this,c).shuffleInDiscardPile(),!0)}playDiscardPileCardToFoundation(){const t=Y(this,c).discardPile[Y(this,c).discardPile.length-1];return void 0!==t&&!!tt(this,m,w).call(this,t)&&(tt(this,m,v).call(this,t),Y(this,c).discardPile.pop(),!0)}playDiscardPileCardToTableau(t){const e=Y(this,c).discardPile[Y(this,c).discardPile.length-1];if(void 0===e)return!1;const s=Y(this,g)[t];return void 0!==s&&!!tt(this,m,D).call(this,e,s)&&(Y(this,g)[t].push(e),Y(this,c).discardPile.pop(),!0)}flipTopTableauCard(t){const e=Y(this,g)[t];if(void 0===e)return!1;const s=e[e.length-1];return void 0!==s&&!s.isFaceUp&&(s.flip(),!0)}moveTableauCardsToAnotherTableau(t,e,s){const i=Y(this,g)[t],a=Y(this,g)[s];if(void 0===i||void 0===a)return!1;const h=i[e];return void 0!==h&&(!!h.isFaceUp&&(!!tt(this,m,D).call(this,h,a)&&(i.splice(e).forEach((t=>a.push(t))),!0)))}moveTableauCardToFoundation(t){const e=Y(this,g)[t];if(void 0===e)return!1;const s=e[e.length-1];return void 0!==s&&!!tt(this,m,w).call(this,s)&&(tt(this,m,v).call(this,s),e.pop(),!0)}}c=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakSet,v=function(t){let e;switch(t.suit){case dt.CLUB:e=Y(this,u);break;case dt.SPADE:e=Y(this,d);break;case dt.HEART:e=Y(this,p);break;case dt.DIAMOND:e=Y(this,f);break;default:gt(t.suit)}e.addCard()},w=function(t){let e;switch(t.suit){case dt.CLUB:e=Y(this,u);break;case dt.SPADE:e=Y(this,d);break;case dt.HEART:e=Y(this,p);break;case dt.DIAMOND:e=Y(this,f);break;default:gt(t.suit)}return t.value===e.value+1},D=function(t,e){if(0===e.length)return 13===t.value;const s=e[e.length-1];return 1!==s.value&&s.color!==t.color&&s.value===t.value+1};const Dt=1.6,Tt=[870,1090,1313,1530],bt={HEART:26,DIAMOND:13,SPADE:39,CLUB:0};let xt=0;const Pt={font:"34px Raleway",fontStyle:"bold",color:"#FFFEFF"};function Et(t){const e=t%60;return`${Math.floor(t/60).toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}const yt="FOUNDATION";class At extends et.Scene{constructor(){super({key:it}),Q(this,y),Q(this,T),Q(this,b),Q(this,x),Q(this,P),Q(this,E),q(this,"moveCounterText"),q(this,"timerEvent"),q(this,"timerText"),q(this,"timerRunning",!1),q(this,"elapsedTime",0),q(this,"score",0),q(this,"scoreText")}create(){if(!this.sys.game.device.os.desktop){let t=0;this.input.on("pointerup",(e=>{let s=e.event.timeStamp,i=s-t;i<300&&i>0?(this.scale.isFullscreen?this.scale.stopFullscreen():this.scale.startFullscreen(),t=0):t=s}))}this.cameras.main.fadeIn(1e3),X(this,T,new wt),Y(this,T).newGame(),tt(this,y,A).call(this),tt(this,y,F).call(this),tt(this,y,I).call(this),tt(this,y,k).call(this),tt(this,y,S).call(this),tt(this,y,L).call(this),this.elapsedTime=0,this.timerRunning=!0,this.score=0,this.scoreText=this.add.text(1520,1015,"Score: 0",Pt),this.timerText=this.add.text(this.scale.width/2,1031,"00:00",{font:"54px Raleway",fontStyle:"bold",color:"#FFFEFF"}).setOrigin(.5),this.timerEvent=this.time.addEvent({delay:1e3,callback:()=>{this.timerRunning&&(this.elapsedTime+=1,this.timerText.setText(""+Et(this.elapsedTime)))},loop:!0}),this.add.image(0,0,rt).setOrigin(0).setDepth(-1),this.add.image(this.scale.width/2,this.scale.height,ot).setOrigin(.5,1).setDepth(-1),this.moveCounterText=this.add.text(280,1015,"Moves: "+xt,Pt)}}T=new WeakMap,b=new WeakMap,x=new WeakMap,P=new WeakMap,E=new WeakMap,y=new WeakSet,A=function(){tt(this,y,O).call(this,200,30),X(this,b,[]);for(let t=0;t<3;t+=1)Y(this,b).push(tt(this,y,C).call(this,200+5*t,30,!1));this.add.zone(200,30,212.60000000000002,261.6).setOrigin(0).setInteractive().on(et.Input.Events.POINTER_DOWN,(()=>{if(0===Y(this,T).drawPile.length&&0===Y(this,T).discardPile.length)return;if(0===Y(this,T).drawPile.length)return Y(this,T).shuffleDiscardPile(),Y(this,x).forEach((t=>t.setVisible(!1))),tt(this,y,$).call(this),xt+=1,void this.moveCounterText.setText("Moves: "+xt);Y(this,T).drawCard(),tt(this,y,$).call(this),Y(this,x)[0].setFrame(Y(this,x)[1].frame).setVisible(Y(this,x)[1].visible);const t=Y(this,T).discardPile[Y(this,T).discardPile.length-1];Y(this,x)[1].setFrame(tt(this,y,j).call(this,t)).setVisible(!0),xt+=1,this.moveCounterText.setText("Moves: "+xt)}))},F=function(){tt(this,y,O).call(this,430,30),X(this,x,[]);const t=tt(this,y,C).call(this,430,30,!0).setVisible(!1),e=tt(this,y,C).call(this,430,30,!0).setVisible(!1);Y(this,x).push(t,e)},I=function(){X(this,P,[]),Tt.forEach((t=>{tt(this,y,O).call(this,t,30);const e=tt(this,y,C).call(this,t,30,!1).setVisible(!1);Y(this,P).push(e)}))},k=function(){X(this,E,[]),Y(this,T).tableauPiles.forEach(((t,e)=>{const s=200+222*e,i=this.add.container(s,320,[]);Y(this,E).push(i),t.forEach(((t,s)=>{const a=tt(this,y,C).call(this,0,35*s,!1,s,e);i.add(a),t.isFaceUp&&(a.setFrame(tt(this,y,j).call(this,t)),this.input.setDraggable(a))}))}))},O=function(t,e){this.add.rectangle(t,e,ct*Dt,156*Dt).setOrigin(0).setStrokeStyle(2,920845,.5)},C=function(t,e,s,i,a){return this.add.image(t,e,nt,54).setOrigin(0).setScale(Dt).setInteractive({draggable:s}).setData({x:t,y:e,cardIndex:i,pileIndex:a})},S=function(){tt(this,y,M).call(this),tt(this,y,R).call(this),tt(this,y,W).call(this),tt(this,y,B).call(this)},M=function(){this.input.on(et.Input.Events.DRAG_START,((t,e)=>{e.setData({x:e.x,y:e.y});const s=e.getData("pileIndex");void 0!==s?Y(this,E)[s].setDepth(2):e.setDepth(2),e.setAlpha(.8)}))},R=function(){this.input.on(et.Input.Events.DRAG,((t,e,s,i)=>{e.setPosition(s,i),e.setDepth(50);const a=e.getData("pileIndex"),h=e.getData("cardIndex");if(void 0!==a){const t=tt(this,y,N).call(this,a,h);for(let e=1;e<=t;e+=1)Y(this,E)[a].getAt(h+e).setPosition(s,i+35*e)}}))},W=function(){this.input.on(et.Input.Events.DRAG_END,((t,e)=>{const s=e.getData("pileIndex");if(void 0!==s?Y(this,E)[s].setDepth(0):e.setDepth(0),e.active){e.setPosition(e.getData("x"),e.getData("y")),e.setAlpha(1);const t=e.getData("cardIndex");if(void 0!==s){const e=tt(this,y,N).call(this,s,t);for(let i=1;i<=e;i+=1){const e=Y(this,E)[s].getAt(t+i);e.setPosition(e.getData("x"),e.getData("y"))}}}}))},N=function(t,e){if(void 0!==t){const s=Y(this,E)[t].length-1;return s===e?0:s-e}return 0},L=function(){this.add.zone(Tt[0],30,444*Dt+150,280).setOrigin(0).setRectangleDropZone(444*Dt+150,280).setData({zoneType:yt});for(let t=0;t<7;t+=1)this.add.zone(200+222*t,320,ct*Dt,585).setOrigin(0).setRectangleDropZone(ct*Dt,585).setData({zoneType:"TABLEAU",tableauIndex:t}).setDepth(-1)},B=function(){this.input.on(et.Input.Events.DROP,((t,e,s)=>{if(s.getData("zoneType")===yt)return void tt(this,y,V).call(this,e);const i=s.getData("tableauIndex");tt(this,y,G).call(this,e,i)}))},U=function(){const t=this.sound.get("cardDrop");t&&t.isPlaying||this.sound.play("cardDrop",{volume:.7})},V=function(t){let e=!1,s=!1;const i=t.getData("pileIndex");void 0===i?(e=Y(this,T).playDiscardPileCardToFoundation(),s=!0):e=Y(this,T).moveTableauCardToFoundation(i),e&&(tt(this,y,U).call(this),xt+=1,this.moveCounterText.setText("Moves: "+xt),this.score+=10,this.scoreText.setText("Score: "+this.score),s?tt(this,y,H).call(this):tt(this,y,_).call(this,i),s||t.destroy(),tt(this,y,z).call(this))},G=function(t,e){let s=!1,i=!1;const a=Y(this,E)[e].length,h=t.getData("pileIndex"),n=t.getData("cardIndex");if(void 0===h?(s=Y(this,T).playDiscardPileCardToTableau(e),i=!0):s=Y(this,T).moveTableauCardsToAnotherTableau(h,n,e),!s)return;if(tt(this,y,U).call(this),xt+=1,this.moveCounterText.setText("Moves: "+xt),i&&(this.score+=5,this.scoreText.setText("Score: "+this.score)),i){const s=tt(this,y,C).call(this,0,35*a,!0,a,e);return s.setFrame(t.frame),Y(this,E)[e].add(s),void tt(this,y,H).call(this)}const r=tt(this,y,N).call(this,h,n);for(let o=0;o<=r;o+=1){const t=Y(this,E)[h].getAt(n);Y(this,E)[h].removeAt(n),Y(this,E)[e].add(t);const s=a+o;t.setData({x:0,y:35*s,cardIndex:s,pileIndex:e})}Y(this,E)[h].setDepth(0),tt(this,y,_).call(this,h)},H=function(){Y(this,x)[1].setFrame(Y(this,x)[0].frame).setVisible(Y(this,x)[0].visible);const t=Y(this,T).discardPile[Y(this,T).discardPile.length-2];void 0===t?Y(this,x)[0].setVisible(!1):Y(this,x)[0].setFrame(tt(this,y,j).call(this,t)).setVisible(!0)},_=function(t){if(Y(this,E)[t].setDepth(0),Y(this,T).flipTopTableauCard(t)){this.score+=5,this.scoreText.setText("Score: "+this.score);const e=Y(this,T).tableauPiles[t],s=e[e.length-1],i=Y(this,E)[t].getAt(e.length-1);i.setFrame(tt(this,y,j).call(this,s)),this.input.setDraggable(i)}},z=function(){Y(this,T).foundationPiles.forEach(((t,e)=>{0!==t.value&&Y(this,P)[e].setVisible(!0).setFrame(tt(this,y,j).call(this,t))})),Y(this,T).wonGame&&(this.timerRunning=!1,this.timerEvent.remove(!1),this.cameras.main.fadeOut(1e3,0,0,0,((t,e)=>{1===e&&this.scene.start("WIN",{moves:xt,time:Et(this.elapsedTime),score:this.score})})))},$=function(){const t=Math.min(Y(this,T).drawPile.length,3);Y(this,b).forEach(((e,s)=>{const i=s<t;e.setVisible(i)})),tt(this,y,U).call(this)},j=function(t){return bt[t.suit]+t.value-1};class Ft extends et.Scene{constructor(){super({key:st}),q(this,"start")}create(){if(!this.sys.game.device.os.desktop){let t;this.sys.game.scale.isLandscape?this.sys.game.scale.isLandscape&&(t=this.add.text(this.scale.width/2,100,"Double tap to toggle fullscreen on/off.",{font:"28px Raleway",color:"#0d0d0d",backgroundColor:"#FFFFEF",padding:{x:30,y:20}}).setOrigin(.5).setDepth(20)):t=this.add.text(this.scale.width/2,100,"Rotate your device and double tap to toggle fullscreen on/off.",{font:"28px Raleway",color:"#0d0d0d",backgroundColor:"#FFFFEF",padding:{x:30,y:20}}).setOrigin(.5).setDepth(20);let e=0;this.input.on("pointerup",(s=>{let i=s.event.timeStamp,a=i-e;a<300&&a>0?(t.setVisible(!1),this.scale.isFullscreen?this.scale.stopFullscreen():this.scale.startFullscreen(),e=0):e=i}))}this.add.image(0,0,at).setOrigin(0),this.start=this.add.image(this.scale.width/2,this.scale.height/2+350,ht).setInteractive({useHandCursor:!0}).setOrigin(.5),this.start.on("pointerdown",(()=>{this.cameras.main.fadeOut(1e3,0,0,0,((t,e)=>{1===e&&this.scene.start(it)}))}))}}class It extends et.Scene{constructor(){super({key:"PRELOADER"})}preload(){this.load.font("Raleway","fonts/Raleway.ttf"),this.load.image(at,"assets/title.webp"),this.load.image(ht,"assets/start.webp"),this.load.image(rt,"assets/table.webp"),this.load.image(ot,"assets/banner.webp"),this.load.image("WIN","assets/win.webp"),this.load.image(lt,"assets/playAgain.webp"),this.load.spritesheet(nt,"assets/cards.webp",{frameWidth:ct,frameHeight:156}),this.load.audio("cardDrop","assets/sfx/card-drop.mp3")}create(){this.scene.start(st)}}const kt={font:"40px Raleway",fontStyle:"bold",color:"#FFFEFF"};class Ot extends et.Scene{constructor(){super({key:"WIN"}),q(this,"start"),q(this,"moves"),q(this,"timer"),q(this,"score")}init(t){this.moves=t.moves,this.timer=t.time,this.score=t.score}create(){this.cameras.main.fadeIn(1e3),this.add.image(0,0,"WIN").setOrigin(0),this.start=this.add.image(300,this.scale.height/2+280,lt).setInteractive({useHandCursor:!0}).setOrigin(0,.5),this.add.text(215,this.scale.height/2-20,"Moves:     -----------------------",kt),this.add.text(1025,this.scale.height/2-20,`${this.moves}`,kt).setOrigin(1,0),this.add.text(215,this.scale.height/2+40,"Score:       -----------------------",kt),this.add.text(1025,this.scale.height/2+40,`${this.score}`,kt).setOrigin(1,0),this.add.text(215,this.scale.height/2+100,"Time:        -----------------------",kt),this.add.text(1025,this.scale.height/2+100,`${this.timer}`,kt).setOrigin(1,0),this.start.on("pointerdown",(()=>{this.cameras.main.fadeOut(1e3,0,0,0,((t,e)=>{1===e&&this.scene.start(it)}))}))}}const Ct={type:Phaser.WEBGL,backgroundColor:"#5c5b5b",scale:{parent:"game-container",width:1920,height:1080,autoCenter:Phaser.Scale.CENTER_BOTH,mode:Phaser.Scale.FIT},scene:[It,Ft,At,Ot]};window.onload=()=>{new et.Game(Ct)};
